!function(){"use strict";function e(t){var i=a[t];if(void 0!==i)return i.exports;var o=a[t]={exports:{}};return n[t](o,o.exports,e),o.exports}var t,n={31506:function(e,t,n){var a,i=n(93324),o=n(1413),r=n(45987),s=n(6589),p=n(71873),l=n(36617),c=n(63630),u=n(15671),h=n(43144),d=n(12024),_=n(69620),y=n(91493),m=n(89062),v=n(17948),f=function(e){return{country:e.countryCode||"",region:e.administrativeArea||"",city:e.locality||"",postalCode:e.postalCode||"",recipient:e.name||"",phone:e.phoneNumber||"",sortingCode:e.sortingCode||"",addressLine:[e.address1||null,e.address2||null,e.address3||null].reduce((function(e,t){return null!=t?[].concat((0,m.Z)(e),[t]):e}),[]),dependentLocality:"",organization:""}},g=function(e,t){var n=e.id;return t.filter((function(e){return n===e.id}))[0]},O=function(e,t,n){var a=e.paymentMethodData.info.billingAddress;return(0,o.Z)((0,o.Z)({complete:n,token:JSON.parse(e.paymentMethodData.tokenizationData.token.trim()),shippingAddress:e.shippingAddress?f(e.shippingAddress):null,shippingOption:e.shippingOptionData&&t.shippingOptions?g(e.shippingOptionData,t.shippingOptions):null,payerEmail:e.email||null},a?{payerName:a.name||null,payerPhone:a.phoneNumber||null}:{}),{},{walletName:"googlePay",methodName:"google-pay"})},P=function e(t){var n=this;(0,u.Z)(this,e),this.loadPaymentData=function(e){return n._client.loadPaymentData(e)},this.isReadyToPay=function(e){return n._client.isReadyToPay(e)},this._client=new google.payments.api.PaymentsClient(t)},w=n(24643),b=n(40939),C=function(){function e(t,n,a,i,l){var c=this;(0,u.Z)(this,e),this._eventHandler=function(){},this._previouslySelectedShippingAddress=null,this._previouslySelectedShippingOption=null,this._wasCompleted=!1,this._handlePaymentDataChanged=function(e){return new s.J((function(t){var n=e.shippingOptionData,a=e.shippingAddress;a&&!(0,d.Xy)(a,c._previouslySelectedShippingAddress)?c._emitEvent({type:"shippingaddresschange",payload:{shippingAddress:f(a),updateWith:function(e){"success"===e.status&&(c._previouslySelectedShippingAddress=(0,o.Z)({},a)),t(c._handleUpdateWith(e,"SHIPPING_ADDRESS"))}}}):n&&n.id!==c._previouslySelectedShippingOption&&c._latestPaymentOptions.shippingOptions?c._emitEvent({type:"shippingoptionchange",payload:{shippingOption:g(n,c._latestPaymentOptions.shippingOptions),updateWith:function(e){"success"===e.status&&(c._previouslySelectedShippingOption=n.id),t(c._handleUpdateWith(e,"SHIPPING_OPTION"))}}}):t({})}))},this._handleUpdateWith=function(e,t){var n=e.status,a=(0,r.Z)(e,["status"]);if("success"!==n)return{error:(0,y.t5)(t,n)};var i=c._latestPaymentOptions.shippingOptions;c._latestPaymentOptions=(0,o.Z)((0,o.Z)({},c._latestPaymentOptions),a);var s=(0,y._t)(c._latestPaymentOptions,c._merchantDetails),p=s.transactionInfo,l=s.shippingOptionParameters,u={newTransactionInfo:p};return!(0,d.Xy)(c._latestPaymentOptions.shippingOptions,i)&&(u.newShippingOptionParameters=l),u},this._handlePaymentAuthorized=function(e){return new s.J((function(t){c._emitEvent({type:"paymentresponse",payload:O(e,c._latestPaymentOptions,(function(e){"success"===e&&(c._wasCompleted=!0),t((0,y.AH)(e))}))})}))},this.setEventHandler=function(e){c._eventHandler=e},this.abort=function(){c._warn("Calling `paymentRequest.abort()` with Google Pay is not supported and will be a no-op.")},this.update=function(e){var t=e.__merchantDetails,n=e.__stripeUserCredentials,a=(0,r.Z)(e,["__merchantDetails","__stripeUserCredentials"]);c._setPaymentOptions((0,d.PM)(c._latestPaymentOptions,a)),c._merchantDetails=(0,d.PM)(c._merchantDetails,t),n&&(c._merchantDetails.apiKey=n.apiKey,c._merchantDetails.accountId=n.accountId)},this.show=function(){c._wasCompleted&&c._report("pr.show_called_after_completion");var e=(0,y._t)(c._latestPaymentOptions,c._merchantDetails);c._client.loadPaymentData(e).then((function(){c._emitEvent({type:"close"})})).catch((function(e){c._emitEvent({type:"close"});var t=function(e){var t=(0,p.ld)((0,p.mC)({statusCode:(0,p.kw)("CANCELED","BUYER_ACCOUNT_ERROR","DEVELOPER_ERROR","MERCHANT_ACCOUNT_ERROR","INTERNAL_ERROR"),statusMessage:(0,p.jt)(p.Z_)}),e,"Pay.js loadPaymentData.catch");return"error"===t.type?{tag:"EXCEPTION",error:e}:{tag:"PAYMENTS_ERROR",error:t.value}}(e);if("PAYMENTS_ERROR"===t.tag&&("CANCELED"===t.error.statusCode?c._emitEvent({type:"cancel"}):c._emitEvent({type:"error",payload:{errorMessage:t.error.statusMessage,errorCode:t.error.statusCode}})),"EXCEPTION"===t.tag)throw t.error}))},this.canMakePayment=function(){var e=!!c._latestPaymentOptions.__isCheckout;return c._clientUnavailable?s.J.resolve(!1):e||(0,b.R)(c._latestPaymentOptions.__betas).enabled?(0,w.Df)((function(){return c._canMakePaymentClient.isReadyToPay((0,y.XM)(c._latestPaymentOptions)).then((function(t){return c._report("pr.google_pay.activity_mode",{activityModeName:t.activityMode?v.d[t.activityMode]:"NO_MODE",activityMode:t.activityMode||-1}),function(e,t){var n=!!t.isCheckout||e.activityMode===v.h.PAYMENT_HANDLER||e.activityMode===v.h.ANDROID_NATIVE;return e.result&&!0===e.paymentMethodPresent&&n}(t,{isCheckout:e})})).then((function(e){return c._report("pr.google_pay.can_make_payment_native_response",{available:e}),e}))})):s.J.resolve(!1)},this._authenticatedOrigin=a,this._setPaymentOptions(t),this._merchantDetails=(0,d.PM)(t.__merchantDetails,n),this._clientUnavailable=!1,this._report=i,this._warn=l;var h=(0,_.lO)(n.apiKey)===_.Kl.live?"PRODUCTION":"TEST",m={paymentDataCallbacks:(0,o.Z)({onPaymentAuthorized:this._handlePaymentAuthorized},t.requestShipping?{onPaymentDataChanged:this._handlePaymentDataChanged}:{})};try{this._client=new P((0,o.Z)({environment:h},m)),this._canMakePaymentClient="TEST"===h?new P((0,o.Z)({environment:"PRODUCTION"},m)):this._client}catch(e){this._clientUnavailable=!0,this._report("error.pr.google_pay.client_unavailable",{errorMessage:e?e.message:"",error:e})}}return(0,h.Z)(e,[{key:"_setPaymentOptions",value:function(e){this._latestPaymentOptions=e,this._latestPaymentOptions.shippingOptions&&this._latestPaymentOptions.shippingOptions[0]&&(this._previouslySelectedShippingOption=this._latestPaymentOptions.shippingOptions[0].id)}},{key:"_emitEvent",value:function(e){this._eventHandler(e)}}]),e}(),E=n(939),D=n(66680),R=n(81743),k={authentication:(0,p.mC)({apiKey:p.Z_,accountId:(0,p.jt)(p.Z_)}),mids:(0,p.jt)(D.p),origin:p.Z_,controllerId:p.Z_,referrer:(0,p.jt)(p.Z_)},S={status:p.kw.apply(void 0,(0,m.Z)(Object.keys(R.qp)))},A=n(18812),M=function(e,t){t.warnings.forEach((function(t){e.warn(t)}))},N=function(e){return function(t){switch(t.type){case"shippingoptionchange":case"shippingaddresschange":var n=t.payload,a=n.updateWith,i=(0,r.Z)(n,["updateWith"]);e.waitForCallback(t.type,i).then((function(n){var i=function(e,t){return(0,p.Gu)(E.F4,e,"Google Pay ".concat(t," Callback"))}(n,t.type);M(e,i),a(i.value)}));break;case"paymentresponse":var o=t.payload,s=o.complete,l=(0,r.Z)(o,["complete"]);e.waitForCallback(t.type,l).then((function(t){var n=function(e,t){return(0,p.Gu)((0,p.mC)(S),e,t)}(t,"GooglePayPaymentRequest complete");M(e,n),s(n.value.status)}));break;case"cancel":e.event("pr-cancel");break;case"close":e.event("pr-close");break;case"error":e.event("pr-error",t.payload);break;case"__private_do_not_use_error":case"__private_do_not_use_billingaddresschange":case"__private_do_not_use_couponcodechange":break;default:(0,p.Rz)(t)}}},Z=function(e){var t,n,a=(t=e,n="payment-request-google-pay-inner.html",(0,p.Gu)((0,p.mC)(k),(0,l.vB)(t),n)),r=a.value,u=r.controllerId,h=r.authentication,d=new c.Z(u);M(d,a);var _=function(e,t){d.report(e,(0,o.Z)((0,o.Z)({},t),{},{backingLibrary:"GOOGLE_PAY"}))},y=new s.J((function(e){d.frameActionEvents.checkCanMakePayment.on(e)}));d._events.initialize.on((function(e,t){var n=(0,l.Ds)(t),a=new s.J((function(t){d.unsafeAction("RETRIEVE_WALLET_CONFIG_AVAILABILITY",{wallet:"google_pay",isHostedSurface:!(!e.__isCheckout&&!e.__isHostedInvoicePage),isPaymentElement:!!e.__isPaymentElement}).then(t).catch((function(){return t(!1)}))})),r=new C(e,(0,o.Z)((0,o.Z)({},h),{},{origin:t},e.__merchantDetails||{name:n?n.host:t}),t,_,d.warn);r.setEventHandler(N(d)),y.then((function(e){var t=e.complete;s.J.all([r.canMakePayment(),a]).then((function(e){var n=(0,i.Z)(e,2),a=n[0],o=n[1];t({available:a&&o})}))})),a.then((function(e){e?d._events.show.on(r.show):d._events.show.on((function(){throw new A.No("We could not verify your domain for use with Google Pay. Please add your domain in your Dashboard.")}))})),d._events.abort.on(r.abort),d._events.update.on(r.update)})),d.event("load")};a=window.location.hash.substring(1).split("?")[0],Z(a)}},a={};e.m=n,t=[],e.O=function(n,a,i,o){if(!a){var r=1/0;for(c=0;c<t.length;c++){a=t[c][0],i=t[c][1],o=t[c][2];for(var s=!0,p=0;p<a.length;p++)(!1&o||r>=o)&&Object.keys(e.O).every((function(t){return e.O[t](a[p])}))?a.splice(p--,1):(s=!1,o<r&&(r=o));if(s){t.splice(c--,1);var l=i();void 0!==l&&(n=l)}}return n}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[a,i,o]},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.j=4505,e.p="https://js.stripe.com/v3/",function(){var t={4505:0};e.O.j=function(e){return 0===t[e]};var n=function(n,a){var i,o,r=a[0],s=a[1],p=a[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(i in s)e.o(s,i)&&(e.m[i]=s[i]);if(p)var c=p(e)}for(n&&n(a);l<r.length;l++)o=r[l],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(c)},a=window.webpackChunkStripeJSinner=window.webpackChunkStripeJSinner||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var i=e.O(void 0,[3712],(function(){return e(31506)}));i=e.O(i)}();
//# sourceMappingURL=https://js.stripe.com/v3/sourcemaps/payment-request-inner-google-pay-3a04eaddcd32b1d982c7760059dbb8cb.js.map